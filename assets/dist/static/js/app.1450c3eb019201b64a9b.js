webpackJsonp([1],{"/6bQ":function(t,e,a){"use strict";function n(t){a("nY8F")}var o=a("JTGZ"),s=a("OFkk"),i=a("VU/8"),c=n,r=i(o.a,s.a,!1,c,"data-v-507922c0",null);e.a=r.exports},0:function(t,e){},"0OZE":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mock-box"},[a("h4",{staticClass:"text-success"},[t._v("\n    mock\n    "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.setActiveMock("")}}},[t._v("关闭mock")])],1),t._v(" "),a("div",{staticClass:"mock cLi"},[a("span",{class:{active:"local"==t.active}},[t._v("✔")]),t._v(" "),a("a",{staticClass:"mockChange changeHost",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.setActiveMock("local")}}},[t._v("本地全部mock")])]),t._v(" "),a("div",{staticClass:"mock cLi"},[a("span",{class:{active:"part"==t.active}},[t._v("✔")]),t._v(" "),a("a",{staticClass:"mockChange changeHost",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.setActiveMock("part")}}},[t._v("本地部分mock")])]),t._v(" "),a("ul",{staticClass:"public-mock"}),t._v(" "),a("div",{staticClass:"panel panel-default"},[a("div",{staticClass:"panel-heading"},[a("el-button",{attrs:{type:"primary"},on:{click:t.createMock}},[t._v("添加api")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.mocks,"tooltip-effect":"dark","row-key":"url"},on:{"select-all":t.changeItemMock,select:t.changeItemMock}},["part"==t.active?a("el-table-column",{attrs:{"reserve-selection":!0,type:"selection",width:"55"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"url"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.name)+"("+t._s(e.row.url)+")\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.setMock(e.row)}}},[t._v("\n            编辑\n          ")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.deleteMock(e.row)}}},[t._v("\n            删除\n          ")])]}}])})],1)],1),t._v(" "),a("mock-modal",{attrs:{data:t.activeData,visible:t.mockModalVisible,onSuccess:t.setMockSuccess},on:{"update:visible":function(e){t.mockModalVisible=e}}})],1)},o=[],s={render:n,staticRenderFns:o};e.a=s},"4yjs":function(t,e,a){"use strict";function n(t){a("OCak")}var o=a("CR9T"),s=a("0OZE"),i=a("VU/8"),c=n,r=i(o.a,s.a,!1,c,null,null);e.a=r.exports},"6Fhg":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"jsoneditor",staticClass:"jsoneditor-box"})},o=[],s={render:n,staticRenderFns:o};e.a=s},"75SK":function(t,e,a){"use strict";e.a={data:function(){return{host:"",port:"",name:"",hosts:[],active:{}}},created:function(){var t=this;this.$http.get("/proxy-api/get/host").then(function(e){t.active=e.data,t.selectHost(e.data)}),this.$http.get("/proxy-api/get/proxies").then(function(e){t.hosts=e.data})},methods:{changeHost:function(){var t=this.host,e=this.port,a=this.name,n={host:t,port:e,name:a};this.$http.get("/proxy-api/change/host",{params:n}).then(function(){this.host="",this.name="",this.port="",this.hosts.push(n),this.active=n})},selectHost:function(t){this.$http.get("/proxy-api/change/host",{params:t}).then(function(){this.active=t})},deleteHost:function(t){this.$http.get("/proxy-api/delete/host",{params:t}).then(function(t){this.hosts=t.data})}}}},"9Yzk":function(t,e,a){"use strict";function n(t){a("GYz2")}var o=a("75SK"),s=a("t0s2"),i=a("VU/8"),c=n,r=i(o.a,s.a,!1,c,"data-v-58ecc64b",null);e.a=r.exports},CEsb:function(t,e){},CR9T:function(t,e,a){"use strict";var n=a("mvHQ"),o=a.n(n),s=a("fZjL"),i=a.n(s),c=a("/6bQ");e.a={components:{mockModal:c.a},data:function(){return{mocks:[],active:"",mockModalVisible:!1,activeData:{}}},created:function(){var t=this;this.$http.get("/proxy-api/get/mock").then(function(e){t.mocks=t.parseMock(e.data),t.mocks.forEach(function(e){e.mock&&t.$refs.multipleTable.toggleRowSelection(e)})}),this.$http.get("/proxy-api/get/activemock").then(function(t){this.active=t.data.mock,this.setActiveMock(t.data.mock)})},methods:{setMockSuccess:function(t){this.mocks=this.parseMock(t)},parseMock:function(t){return i()(t).map(function(e){return t[e]})},changeItemMock:function(t){this.$http.post("/proxy-api/set/mockStatus",t).then(function(t){this.mocks=this.parseMock(t.data)})},deleteMock:function(t){if(!confirm("是否删除这个mock"))return!1;this.$http.get("/proxy-api/delete/mock",{params:t}).then(function(t){this.mocks=this.parseMock(t.data)})},createMock:function(){this.activeData={data:[]},this.mockModalVisible=!0},setMock:function(t){this.activeData=JSON.parse(o()(t)),this.mockModalVisible=!0},setActiveMock:function(t){this.$http.get("/proxy-api/set/activemock",{params:{mock:t}}).then(function(t){this.active=t.data.mock})}}}},GYz2:function(t,e){},JTGZ:function(t,e,a){"use strict";var n=a("exBe");e.a={components:{JsonEditor:n.a},props:{data:{type:Object},onSuccess:{type:Function},visible:{type:Boolean,required:!0}},computed:{currentVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},data:function(){return{formData:{name:"",url:"",duration:0,data:[{name:"请求参数1",requestData:{},responseData:{}}]},activeData:{requestData:{},responseData:{}}}},methods:{nameInputBlur:function(t){t.target.disabled=!0},editName:function(t){var e=t.target.parentNode.parentNode.querySelector(".name");e.disabled=!1,e.focus()},deleteItemMock:function(t){this.formData.data=this.formData.data.filter(function(e){return e!==t}),this.activeData=this.formData.data[0],this.setEditor()},initDialog:function(){var t=this;this.formData=this.data,this.data.data&&0!==this.data.data.length||(this.data.data=[{name:"请求参数1",requestData:{},responseData:{}}]),this.$nextTick(function(){t.activeData=t.data.data[0],t.setEditor()})},addData:function(){var t={name:"请求参数"+(this.formData.data.length+1),requestData:{},responseData:{}};this.formData.data.push(t),this.activeData=t,this.setEditor()},selectData:function(t){this.activeData=t,this.setEditor()},onResChange:function(t){this.activeData.responseData=t},onParamChange:function(t){this.activeData.requestData=t},onError:function(){console.log(1111)},saveMock:function(){this.$http.post("/proxy-api/set/mock",this.formData).then(function(t){this.onSuccess(t.data),this.initMockData(),this.currentVisible=!1})},initMockData:function(){},setEditor:function(){this.$refs.jsonEditor.editor.set(this.activeData.responseData),this.$refs.jsonEditorParam.editor.set(this.activeData.requestData)},close:function(){this.initMockData(),this.currentVisible=!1}}}},JpGR:function(t,e,a){"use strict";var n=a("32SN"),o=a.n(n),s=a("CEsb"),i=(a.n(s),a("M4fF")),c=a.n(i);e.a={name:"json-editor",data:function(){return{editor:null}},props:{json:{required:!0},options:{type:Object,default:function(){return{mode:"code",indentation:2,ace:ace}}},onChange:{type:Function},onError:{type:Function},title:{type:String}},methods:{_onChange:function(t){this.onChange&&this.editor&&this.onChange(this.editor.get())}},mounted:function(){var t=this,e=this.$refs.jsoneditor;this.$nextTick(function(){e.querySelector(".jsoneditor-menu").innerHTML=t.title});var a=c.a.extend({onChange:this._onChange,onError:function(){}},this.options);this.editor=new o.a(e,a),this.editor.set(this.json)},beforeDestroy:function(){this.editor&&(this.editor.destroy(),this.editor=null)}}},M93x:function(t,e,a){"use strict";function n(t){a("xDNk")}var o=a("xJD8"),s=a("xkOj"),i=a("VU/8"),c=n,r=i(o.a,s.a,!1,c,null,null);e.a=r.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o=a("M93x"),s=a("8+8L"),i=a("zL8q"),c=a.n(i),r=a("tvR6");a.n(r);n.default.config.productionTip=!1,n.default.use(s.a),n.default.use(c.a),new n.default({el:"#app",template:"<App/>",components:{App:o.a}})},OCak:function(t,e){},OFkk:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{fullscreen:!0,modal:!1,visible:t.currentVisible,title:"设置mock","before-close":t.close},on:{open:t.initDialog,"update:visible":function(e){t.currentVisible=e}}},[a("el-form",{attrs:{model:t.formData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"name"}},[a("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"url",required:""}},[a("el-input",{model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"duration",required:""}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.formData.duration,callback:function(e){t.$set(t.formData,"duration",t._n(e))},expression:"formData.duration"}},[a("template",{slot:"append"},[t._v("ms")])],2)],1),t._v(" "),a("span",{staticClass:"info"},[t._v("注：优先返回参数字段最多个相等那个")]),t._v(" "),a("section",{staticClass:"dataBox"},[a("article",{staticClass:"tabs"},[t._l(t.formData.data,function(e){return a("div",{class:{active:t.activeData===e},on:{click:function(a){t.selectData(e)}}},[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"name",attrs:{disabled:"",type:"text"},domProps:{value:e.name},on:{blur:t.nameInputBlur,input:function(a){a.target.composing||t.$set(e,"name",a.target.value)}}})]),t._v(" "),a("span",{staticClass:"iconBox"},[a("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.preventDefault(),t.editName(e)}}}),t._v(" "),t.formData.data.length>1?a("i",{staticClass:"el-icon-delete",on:{click:function(a){a.preventDefault(),t.deleteItemMock(e)}}}):t._e()])])}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-circle-plus",type:"info",size:"mini"},on:{click:t.addData}},[t._v("添加参数")])],2),t._v(" "),a("article",{staticClass:"content"},[a("div",{staticClass:"paramJsonEditorBox"},[a("json-editor",{ref:"jsonEditorParam",attrs:{title:"入参",onError:t.onError,onChange:t.onParamChange,json:t.activeData.requestData}})],1),t._v(" "),a("div",{staticClass:"jsonEditorBox"},[a("json-editor",{ref:"jsonEditor",attrs:{title:"出参",onError:t.onError,onChange:t.onResChange,json:t.activeData.responseData}})],1)])])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.close}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveMock}},[t._v("确 定")])],1)],1)},o=[],s={render:n,staticRenderFns:o};e.a=s},YBBi:function(t,e){},exBe:function(t,e,a){"use strict";function n(t){a("YBBi")}var o=a("JpGR"),s=a("6Fhg"),i=a("VU/8"),c=n,r=i(o.a,s.a,!1,c,null,null);e.a=r.exports},nY8F:function(t,e){},t0s2:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",{staticClass:"text-success"},[t._v("\n    切换proxy\n    "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.selectHost({host:"",port:"",id:"",name:""})}}},[t._v("关闭proxy")])],1),t._v(" "),a("el-alert",{attrs:{title:"当前proxy:"+t.active.host+":"+t.active.port+"("+t.active.name+")",type:"warning",closable:!1}}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"Name"}},[a("el-input",{attrs:{placeholder:"测试"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"host"}},[a("el-input",{attrs:{placeholder:"localhost"},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"port"}},[a("el-input",{attrs:{placeholder:"80"},model:{value:t.port,callback:function(e){t.port=e},expression:"port"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.changeHost}},[t._v("新建并切换")])],1)],1),t._v(" "),a("ul",{staticClass:"host-list"},t._l(t.hosts,function(e){return a("li",{staticClass:"cLi"},[a("span",{staticClass:"checked",class:{active:e.host==t.active.host&&e.port==t.active.port&&e.name==t.active.name}},[t._v("✔")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(a){t.selectHost(e)}}},[t._v("\n          "+t._s(e.host)+":"+t._s(e.port)+"("+t._s(e.name)+")\n        ")]),t._v(" "),a("button",{staticClass:"delete-proxy",attrs:{type:"button"},on:{click:function(a){t.deleteHost(e)}}},[a("span",[t._v("×")])])],1)}))],1)},o=[],s={render:n,staticRenderFns:o};e.a=s},tvR6:function(t,e){},xDNk:function(t,e){},xJD8:function(t,e,a){"use strict";var n=a("9Yzk"),o=a("4yjs");e.a={components:{Props:n.a,Mock:o.a}}},xkOj:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("props"),t._v(" "),a("mock")],1)},o=[],s={render:n,staticRenderFns:o};e.a=s}},["NHnr"]);
//# sourceMappingURL=app.1450c3eb019201b64a9b.js.map